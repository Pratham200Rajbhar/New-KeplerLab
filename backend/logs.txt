2026-02-26 12:04:18,103 app.db.prisma_client INFO Prisma client connected to database
2026-02-26 12:04:18,103 main INFO Warming up embedding model (running in thread pool)…
2026-02-26 12:04:18,210 app.db.chroma INFO ChromaDB client initialised at /disk2/Projects/KeplerLab-AI-Notebook/backend/./data/chroma
2026-02-26 12:04:18,212 app.db.chroma INFO ChromaDB collection 'chapters' ready
2026-02-26 12:04:18,534 app.services.rag.embedder INFO Embedding model (ChromaDB ONNX) warm-up complete.
2026-02-26 12:04:18,535 main INFO Preloading reranker model (running in thread pool)…
2026-02-26 12:04:22,108 app.services.rag.reranker INFO Loading reranker: BAAI/bge-reranker-large on cuda
2026-02-26 12:04:26,115 app.services.rag.reranker INFO Reranker warm-up forward pass complete
2026-02-26 12:04:26,116 app.services.rag.reranker INFO Reranker loaded successfully in 4.06s
2026-02-26 12:04:26,116 main INFO Reranker preloaded.
2026-02-26 12:04:26,117 main INFO Background job processor task created.
2026-02-26 12:04:26,118 main INFO Ensuring sandbox packages are installed…
2026-02-26 12:04:26,755 app.services.code_execution.sandbox_env INFO [sandbox_env] All 17 packages already installed
2026-02-26 12:04:26,756 main INFO Output directories ensured.
2026-02-26 12:04:26,756 app.services.worker INFO Background job processor started (poll_interval=2.0s, concurrent_limit=5)
2026-02-26 12:04:37,336 app.routes.auth INFO Login attempt for email: pratham@gmail.com
2026-02-26 12:04:37,782 app.routes.auth INFO User logged in successfully: 7c06288c-d5d3-4339-a753-4b1cf5a842b6
2026-02-26 12:04:37,783 main INFO POST /auth/login 200 0.46s [a564f67a]
2026-02-26 12:04:37,801 main INFO GET /auth/me 200 0.01s [e49e084b]
2026-02-26 12:04:37,842 performance INFO request_performance
2026-02-26 12:04:37,842 main INFO GET /notebooks 200 0.01s [c0153cf3]
2026-02-26 12:04:37,856 performance INFO request_performance
2026-02-26 12:04:37,857 main INFO GET /notebooks 200 0.01s [ab076874]
2026-02-26 12:04:38,501 app.routes.websocket_router INFO WS /ws/jobs/7c06288c-d5d3-4339-a753-4b1cf5a842b6 connected
2026-02-26 12:04:38,504 performance INFO request_performance
2026-02-26 12:04:38,505 main INFO GET /notebooks/1d0c612d-bd6e-4775-a9a9-11c9e0c568b5 200 0.01s [34fb860b]
2026-02-26 12:04:38,519 performance INFO request_performance
2026-02-26 12:04:38,520 main INFO GET /notebooks/1d0c612d-bd6e-4775-a9a9-11c9e0c568b5 200 0.01s [d5748df2]
2026-02-26 12:04:38,599 main INFO GET /materials 200 0.06s [acbb3094]
2026-02-26 12:04:38,628 performance INFO request_performance
2026-02-26 12:04:38,629 main INFO GET /chat/history/1d0c612d-bd6e-4775-a9a9-11c9e0c568b5 200 0.09s [f25e44af]
2026-02-26 12:04:38,647 main INFO GET /materials 200 0.01s [0e26fdca]
2026-02-26 12:04:38,698 performance INFO request_performance
2026-02-26 12:04:38,698 main INFO GET /chat/sessions/1d0c612d-bd6e-4775-a9a9-11c9e0c568b5 200 0.16s [efe998f1]
2026-02-26 12:04:38,700 performance INFO request_performance
2026-02-26 12:04:38,701 main INFO GET /notebooks/1d0c612d-bd6e-4775-a9a9-11c9e0c568b5/content 200 0.16s [8a4cf17d]
2026-02-26 12:04:43,550 main INFO GET /materials/f7b441cf-f251-4b9d-be41-03df36686f09/text 200 0.02s [62453f4c]
2026-02-26 12:04:52,546 performance INFO request_performance
2026-02-26 12:04:52,547 main INFO POST /chat/sessions 200 0.02s [4dcea15b]
2026-02-26 12:04:52,582 performance INFO request_performance
2026-02-26 12:04:52,583 main INFO GET /chat/sessions/1d0c612d-bd6e-4775-a9a9-11c9e0c568b5 200 0.01s [b3cee81f]
2026-02-26 12:04:52,605 performance INFO request_performance
2026-02-26 12:04:52,606 main INFO GET /chat/history/1d0c612d-bd6e-4775-a9a9-11c9e0c568b5 200 0.01s [78d12edf]
2026-02-26 12:04:52,690 app.services.agent.tools_registry INFO Registered tool: rag_tool
2026-02-26 12:04:52,691 app.services.agent.tools_registry INFO Registered tool: quiz_tool
2026-02-26 12:04:52,691 app.services.agent.tools_registry INFO Registered tool: flashcard_tool
2026-02-26 12:04:52,691 app.services.agent.tools_registry INFO Registered tool: ppt_tool
2026-02-26 12:04:52,691 app.services.agent.tools_registry INFO Registered tool: python_tool
2026-02-26 12:04:52,691 app.services.agent.tools_registry INFO Registered tool: research_tool
2026-02-26 12:04:52,691 app.services.agent.tools_registry INFO Initialized 6 tools: ['rag_tool', 'quiz_tool', 'flashcard_tool', 'ppt_tool', 'python_tool', 'research_tool']
2026-02-26 12:04:52,729 app.services.agent.graph INFO Agent graph compiled successfully
2026-02-26 12:04:52,730 performance INFO request_performance
2026-02-26 12:04:52,780 main INFO POST /chat 200 0.18s [e1630806]
2026-02-26 12:04:52,785 app.services.agent.intent INFO Detecting intent for message: implementation of K-Means clustering algorithms using the Mall_Customers.csv dataset. The dataset co...
2026-02-26 12:04:52,785 app.services.agent.intent INFO Keyword intent: DATA_ANALYSIS (confidence=0.90)
2026-02-26 12:04:52,785 app.services.agent.planner INFO Planning execution for intent: DATA_ANALYSIS
2026-02-26 12:04:52,789 app.services.agent.planner INFO Plan: ['data_profiler', 'python_tool']
2026-02-26 12:04:52,791 app.services.agent.router INFO [router] Executing | intent=DATA_ANALYSIS | step=1/2 | tool=data_profiler | iter=0 | desc='Profile structured dataset directly from file path'
2026-02-26 12:04:52,792 app.services.agent.tools.data_profiler INFO [data_profiler] Profiling Social_Network_Ads (1).csv (/disk2/Projects/KeplerLab-AI-Notebook/backend/./data/uploads/7c06288c-d5d3-4339-a753-4b1cf5a842b6/99c3659c798345d3a44b212cd147eb9d_Social_Network_Ads (1).csv)
2026-02-26 12:04:52,811 app.services.agent.tools.data_profiler INFO [data_profiler] Profile complete: 400 rows × 5 cols
2026-02-26 12:04:52,814 app.services.agent.reflection INFO [reflect] iter=1 | tool=data_profiler | intent=DATA_ANALYSIS | steps=1/2 | retries=0 | repairs=0 | tokens=0
2026-02-26 12:04:52,814 app.services.agent.reflection INFO [reflect] CONTINUE: next step 2/2
2026-02-26 12:04:52,816 app.services.agent.router INFO [router] Executing | intent=DATA_ANALYSIS | step=2/2 | tool=python_tool | iter=1 | desc='Analyse data using pd.read_csv() / pd.read_excel() on the real file path'
2026-02-26 12:04:52,816 app.services.agent.router INFO [router] Chaining: injecting 26 chars from previous tool 'data_profiler'
2026-02-26 12:04:52,817 app.services.agent.tools_registry INFO [python_tool] START | query='implementation of K-Means clustering algorithms using the Mall_Customers.csv dat'
2026-02-26 12:06:01,588 app.services.code_execution.executor INFO Generated 6392 chars of code
2026-02-26 12:06:01,590 app.services.code_execution.executor INFO Mounted 1 parquet file(s) into /tmp/kepler_analysis_6jz73faj
2026-02-26 12:06:01,590 app.services.code_execution.executor INFO [90ca8e91] Executing code (6392 chars)
2026-02-26 12:06:03,493 app.services.code_execution.executor INFO [90ca8e91] Execution complete: exit=1, timeout=False, elapsed=1.88s, chart=no
2026-02-26 12:06:03,494 app.services.agent.tools_registry INFO [python_tool] FAILED | elapsed=70.68s | exit_code=1
2026-02-26 12:06:03,494 app.services.agent.router INFO [router] Result | tool=python_tool | success=False | output='{"stdout": "Traceback (most recent call last):\\n  File \\"/tmp/kepler_analysis_6jz73faj/_run.py\\", line 37, in <module>\\n' | iter=1
2026-02-26 12:06:03,494 app.services.agent.router WARNING [router] Tool failure | tool=python_tool | error='unknown'
2026-02-26 12:06:03,496 app.services.agent.reflection INFO [reflect] iter=2 | tool=python_tool | intent=DATA_ANALYSIS | steps=2/2 | retries=0 | repairs=0 | tokens=500
2026-02-26 12:06:03,497 app.services.agent.reflection INFO [reflect] Code error detected — repair attempt 1/3 for tool=python_tool
2026-02-26 12:06:03,581 app.services.agent.tools.code_repair INFO [code_repair] Requesting fix for error: Traceback (most recent call last):
  File "/tmp/kepler_analysis_6jz73faj/_run.py", line 37, in <module>
    df = pd.read_csv("Mall_Customers.csv")

2026-02-26 12:07:17,196 app.services.agent.tools.code_repair INFO [code_repair] Got fix (6833 chars, original was 6392 chars)
2026-02-26 12:07:17,199 app.services.agent.router INFO [router] Executing | intent=DATA_ANALYSIS | step=2/2 | tool=python_tool | iter=2 | desc='Analyse data using pd.read_csv() / pd.read_excel() on the real file path'
2026-02-26 12:07:17,199 app.services.agent.router INFO [router] Chaining: injecting 274 chars from previous tool 'python_tool'
2026-02-26 12:07:17,199 app.services.agent.tools_registry INFO [python_tool] START | query='implementation of K-Means clustering algorithms using the Mall_Customers.csv dat'
2026-02-26 12:08:36,627 app.services.code_execution.executor INFO Generated 7449 chars of code
2026-02-26 12:08:36,628 app.services.code_execution.executor INFO Mounted 1 parquet file(s) into /tmp/kepler_analysis_4xltl1dh
2026-02-26 12:08:36,628 app.services.code_execution.executor INFO [798b66a6] Executing code (7449 chars)
2026-02-26 12:08:40,704 app.services.code_execution.executor INFO [798b66a6] Execution complete: exit=0, timeout=False, elapsed=4.05s, chart=yes
2026-02-26 12:09:08,354 app.services.agent.tools_registry INFO [python_tool] OK | elapsed=83.50s | exit_code=0
2026-02-26 12:09:08,354 app.services.agent.router INFO [router] Result | tool=python_tool | success=True | output='{"stdout": "Dataset Shape: (200, 5)\\n\\nFirst 5 rows:\\n   CustomerID   Genre  Age  Annual Income (k$)  Spending Score (1-' | iter=2
2026-02-26 12:09:08,356 app.services.agent.reflection INFO [reflect] iter=3 | tool=python_tool | intent=DATA_ANALYSIS | steps=2/2 | retries=0 | repairs=1 | tokens=1000
2026-02-26 12:09:08,356 app.services.agent.reflection INFO [reflect] Code repair succeeded after 1 attempts
2026-02-26 12:09:08,356 app.services.agent.reflection INFO [reflect] RESPOND: all 2 plan step(s) complete
2026-02-26 12:09:27,425 app.routes.websocket_router INFO WS /ws/jobs/7c06288c-d5d3-4339-a753-4b1cf5a842b6 disconnected
2026-02-26 12:09:27,425 app.services.ws_manager INFO WS disconnect: user=7c06288c-d5d3-4339-a753-4b1cf5a842b6  remaining=0
2026-02-26 12:09:27,525 main INFO Background job processor stopped.
2026-02-26 12:09:27,528 app.db.prisma_client INFO Prisma client disconnected from database
